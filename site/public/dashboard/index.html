<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboards</title>
    <link rel="stylesheet" href="./css/geral.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../integracaoTelegram/scrpt.js"></script>
  </head>
  <body>
    <div class="banner">
      <div class="container" id="container">
        <div class="barra">
          <div class="icones">
            <div class="box">
              <img src="./img/icon-profile.png" />
              <span id="nomeGerente"></span>
            </div>

            <div class="box">
              <img src="./img/icon-home.png" />
              <span>Geral</span>
            </div>

            <div class="box">
              <img src="./img/icon-settings.png" />
              <span>Ajustes</span>
            </div>

            <div class="box">
              <img src="./img/icon-phone.png" />
              <span>Chamado</span>
            </div>

            <div class="box">
              <img src="./img/sair.png" />
              <a href="../index.html" onclick="sair()">Sair</a>
            </div>
          </div>
        </div>

        <div class="container-kpi">
          <select name="totens" id="totens" onchange="sessoesTotens()">
            <option value="Geral">Geral</option>
            <option value="Totens">Totens</option>
            <option value="Ajustes">Ajustes</option>
            
          </select>
          <div id="kpis" class="kpis">
            <div class="container-box-toten"></div>

            <div class="kpi">
              <p>Número de totens com alertas no dia</p>
              <span id="numeroAlertas"></span>
            </div>

            <div class="kpi">
              <p>Próxima reinicialização</p>
              <span id="diaReinicializacao"></span>
              <span id="horarioReinicializacao"></span>
            </div>

            <div class="kpi">
              <p>Média de perda de lucratividade com totens inativos</p>
              <span class="unico" id="valorPerda"></span>
              <span class="valor-end-perda" id="data_horario_calculo"></span>
            </div>
          </div>

          <div id="containerGrafico" class="container-grafico">
            <div class="grafico">
              <canvas id="myChart" style="padding: 20px"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>

  <script>
    window.onload = function () {
      nomeGerente.innerHTML = sessionStorage.NOME;
      buscarTotens()
      setTimeout(() => {
        plotarGrafico()
        buscarDadosKpi1()
        buscarDadosKpi2()
        buscarDadosKpi3()
      },500)
    };
    function sessoesTotens() {
      var opcaoSelecionada = totens.value;

      if (opcaoSelecionada == "Historico") {
        window.location.assign("historico.html");
      } else if (opcaoSelecionada == "Geral") {
        window.location.assign("index.html");
      } else if (opcaoSelecionada == "Totens") {
        window.location.assign("totens.html");
      } else if (opcaoSelecionada == "Ajustes") {
        window.location.assign("ajustes.html");
      }
    }
  </script>
  <script>
    function sair() {
      sessionStorage.clear()
    }
  </script>
</html>
<script src="../js/dashBoardGerente.js"></script>
<script src="../js/kpiGerente.js"></script>
